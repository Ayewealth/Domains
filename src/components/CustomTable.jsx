import React, { useState } from 'react';
import { Checkbox, CircularProgress, Typography } from '@mui/material';
import KeyboardArrowDownOutlinedIcon from '@mui/icons-material/KeyboardArrowDownOutlined';

import { useDomain } from '../context/DomainContex';

function formatDate(date) {
    return new Intl.DateTimeFormat('en-US', {
        year: 'numeric',
        month: 'short',
        day: 'numeric',
    }).format(date);
}

function CustomTable() {
    const [Status, setStatus] = useState("#3A974C")
    const { fetchData, tableData, } = useDomain()

    const handleStatus = (row) => {
        if (row.status === "Running") {
            setStatus("#3A974C")
        }
        else if (row.status === "Will Expire") {
            setStatus("#F29339")
        }
        else {
            setStatus("#D11A2A")
        }
    }


    if (fetchData.isLoading) {
        return <CircularProgress />;
    }

    if (fetchData.isError) {
        return <div>Error fetching data.</div>;
    }

    if (!fetchData.data || fetchData.data.length === 0) {
        return <div>No data available.</div>;
    }

    return (
        <div className='table__container'>
            <div className='table'>
                <table>
                    <thead>
                        <tr className='table__head'>
                            <th>
                                <Checkbox
                                />
                                <Typography variant='p' sx={{ color: "#030229", fontWeight: '400', opacity: '0.7', fontSize: '14px' }}>ID</Typography>
                                <svg id='arrow-down' xmlns="http://www.w3.org/2000/svg" width="6" height="5" viewBox="0 0 6 5" fill="none">
                                    <g opacity="0.7">
                                        <path d="M2.4345 4.81539C2.4055 4.78714 2.2815 4.68047 2.1795 4.5811C1.538 3.99854 0.488 2.47881 0.1675 1.68339C0.116 1.56259 0.007 1.25718 0 1.09401C0 0.937652 0.036 0.788602 0.109 0.646371C0.211 0.46907 0.3715 0.326839 0.561 0.248904C0.6925 0.198734 1.086 0.120799 1.093 0.120799C1.5235 0.0428641 2.223 0 2.996 0C3.7325 0 4.4035 0.0428641 4.8405 0.106673C4.8475 0.11398 5.3365 0.191914 5.504 0.277155C5.81 0.433512 6 0.738919 6 1.06576V1.09401C5.9925 1.30687 5.8025 1.75451 5.7955 1.75451C5.4745 2.50706 4.476 3.99172 3.8125 4.58841C3.8125 4.58841 3.642 4.75645 3.5355 4.82952C3.3825 4.9435 3.193 5 3.0035 5C2.792 5 2.595 4.93619 2.4345 4.81539Z" fill="#030229" />
                                    </g>
                                </svg>
                            </th>
                            <th>
                                <Typography variant='p' sx={{ color: "#030229", fontWeight: '400', opacity: '0.7', fontSize: '14px' }}>Domain Price</Typography>
                                <svg id='arrow-down' xmlns="http://www.w3.org/2000/svg" width="6" height="5" viewBox="0 0 6 5" fill="none">
                                    <g opacity="0.7">
                                        <path d="M2.4345 4.81539C2.4055 4.78714 2.2815 4.68047 2.1795 4.5811C1.538 3.99854 0.488 2.47881 0.1675 1.68339C0.116 1.56259 0.007 1.25718 0 1.09401C0 0.937652 0.036 0.788602 0.109 0.646371C0.211 0.46907 0.3715 0.326839 0.561 0.248904C0.6925 0.198734 1.086 0.120799 1.093 0.120799C1.5235 0.0428641 2.223 0 2.996 0C3.7325 0 4.4035 0.0428641 4.8405 0.106673C4.8475 0.11398 5.3365 0.191914 5.504 0.277155C5.81 0.433512 6 0.738919 6 1.06576V1.09401C5.9925 1.30687 5.8025 1.75451 5.7955 1.75451C5.4745 2.50706 4.476 3.99172 3.8125 4.58841C3.8125 4.58841 3.642 4.75645 3.5355 4.82952C3.3825 4.9435 3.193 5 3.0035 5C2.792 5 2.595 4.93619 2.4345 4.81539Z" fill="#030229" />
                                    </g>
                                </svg>
                            </th>
                            <th>
                                <Typography variant='p' sx={{ color: "#030229", fontWeight: '400', opacity: '0.7', fontSize: '14px' }}>Status</Typography>
                                <svg id='arrow-down' xmlns="http://www.w3.org/2000/svg" width="6" height="5" viewBox="0 0 6 5" fill="none">
                                    <g opacity="0.7">
                                        <path d="M2.4345 4.81539C2.4055 4.78714 2.2815 4.68047 2.1795 4.5811C1.538 3.99854 0.488 2.47881 0.1675 1.68339C0.116 1.56259 0.007 1.25718 0 1.09401C0 0.937652 0.036 0.788602 0.109 0.646371C0.211 0.46907 0.3715 0.326839 0.561 0.248904C0.6925 0.198734 1.086 0.120799 1.093 0.120799C1.5235 0.0428641 2.223 0 2.996 0C3.7325 0 4.4035 0.0428641 4.8405 0.106673C4.8475 0.11398 5.3365 0.191914 5.504 0.277155C5.81 0.433512 6 0.738919 6 1.06576V1.09401C5.9925 1.30687 5.8025 1.75451 5.7955 1.75451C5.4745 2.50706 4.476 3.99172 3.8125 4.58841C3.8125 4.58841 3.642 4.75645 3.5355 4.82952C3.3825 4.9435 3.193 5 3.0035 5C2.792 5 2.595 4.93619 2.4345 4.81539Z" fill="#030229" />
                                    </g>
                                </svg>
                            </th>
                            <th>
                                <Typography variant='p' sx={{ color: "#030229", fontWeight: '400', opacity: '0.7', fontSize: '14px' }}>Created At</Typography>
                                <svg id='arrow-down' xmlns="http://www.w3.org/2000/svg" width="6" height="5" viewBox="0 0 6 5" fill="none">
                                    <g opacity="0.7">
                                        <path d="M2.4345 4.81539C2.4055 4.78714 2.2815 4.68047 2.1795 4.5811C1.538 3.99854 0.488 2.47881 0.1675 1.68339C0.116 1.56259 0.007 1.25718 0 1.09401C0 0.937652 0.036 0.788602 0.109 0.646371C0.211 0.46907 0.3715 0.326839 0.561 0.248904C0.6925 0.198734 1.086 0.120799 1.093 0.120799C1.5235 0.0428641 2.223 0 2.996 0C3.7325 0 4.4035 0.0428641 4.8405 0.106673C4.8475 0.11398 5.3365 0.191914 5.504 0.277155C5.81 0.433512 6 0.738919 6 1.06576V1.09401C5.9925 1.30687 5.8025 1.75451 5.7955 1.75451C5.4745 2.50706 4.476 3.99172 3.8125 4.58841C3.8125 4.58841 3.642 4.75645 3.5355 4.82952C3.3825 4.9435 3.193 5 3.0035 5C2.792 5 2.595 4.93619 2.4345 4.81539Z" fill="#030229" />
                                    </g>
                                </svg>
                            </th>
                            <th>
                                <Typography variant='p' sx={{ color: "#030229", fontWeight: '400', opacity: '0.7', fontSize: '14px' }}>Action</Typography>
                            </th>
                        </tr>
                    </thead>
                    <tbody>
                        {tableData.map((row) => (
                            <tr key={row.id} className='table__row'>
                                <td style={{ fontSize: '14px', fontWeight: '500' }}>
                                    <Checkbox
                                    />
                                    #{row.id}
                                </td>
                                <td style={{ fontSize: '14px', fontWeight: '500' }}>${row.domainPrice}.00</td>
                                <td id='status' style={{ backgroundColor: "#F6F6F6", padding: '10px 40px', borderRadius: '20px', fontSize: '14px' }}>
                                    <p style={{ color: Status, fontSize: '14px', fontWeight: '500' }}>{row.status}</p>
                                    <KeyboardArrowDownOutlinedIcon fontSize='small' />
                                </td>
                                <td style={{ gap: "0.5rem", fontSize: '14px', fontWeight: '500' }}>
                                    <svg xmlns="http://www.w3.org/2000/svg" width="13" height="15" viewBox="0 0 13 15" fill="none">
                                        <path fill-rule="evenodd" clip-rule="evenodd" d="M9.70012 1.40327L9.70081 1.928C11.6291 2.07913 12.9028 3.39307 12.9049 5.40806L12.9125 11.3061C12.9153 13.503 11.5351 14.8547 9.32276 14.8582L3.91882 14.8652C1.72034 14.868 0.322872 13.4841 0.320107 11.2809L0.312505 5.45214C0.30974 3.42385 1.53857 2.11341 3.46682 1.9364L3.46613 1.41166C3.46544 1.10382 3.69351 0.872232 3.99761 0.872232C4.3017 0.871533 4.52978 1.10242 4.53047 1.41026L4.53116 1.90002L8.63647 1.89442L8.63578 1.40467C8.63509 1.09682 8.86316 0.865936 9.16726 0.865236C9.46444 0.864536 9.69943 1.09542 9.70012 1.40327ZM1.37569 5.6691L11.8394 5.65511V5.41023C11.8097 3.90599 11.055 3.11678 9.70034 2.99924L9.70103 3.53797C9.70103 3.83882 9.46674 4.0774 9.16956 4.0774C8.86546 4.0781 8.6367 3.84022 8.6367 3.53937L8.636 2.97265L4.53069 2.97825L4.53139 3.54427C4.53139 3.84582 4.304 4.0837 3.99991 4.0837C3.69581 4.0844 3.46705 3.84722 3.46705 3.54567L3.46636 3.00694C2.11865 3.14197 1.37292 3.93397 1.375 5.45151L1.37569 5.6691ZM8.8789 8.84942V8.85712C8.88581 9.17896 9.14844 9.42314 9.46705 9.41614C9.77806 9.40844 10.0262 9.14188 10.0193 8.82004C10.0048 8.51219 9.75525 8.26102 9.44494 8.26172C9.12702 8.26871 8.87821 8.52758 8.8789 8.84942ZM9.45015 11.9909C9.13223 11.9839 8.87582 11.7187 8.87513 11.3969C8.86822 11.075 9.12325 10.8085 9.44117 10.8008H9.44808C9.77291 10.8008 10.0362 11.0659 10.0362 11.3948C10.0369 11.7236 9.77429 11.9902 9.45015 11.9909ZM6.03107 8.86023C6.0449 9.18207 6.30822 9.43325 6.62614 9.41925C6.93714 9.40456 7.18526 9.13869 7.17144 8.81686C7.16384 8.50201 6.90812 8.25714 6.59711 8.25784C6.27919 8.27183 6.03038 8.5384 6.03107 8.86023ZM6.63021 11.9583C6.31229 11.9723 6.04966 11.7211 6.03515 11.3993C6.03515 11.0774 6.28327 10.8116 6.60118 10.7969C6.91219 10.7962 7.1686 11.0411 7.17551 11.3552C7.19003 11.6777 6.94122 11.9436 6.63021 11.9583ZM3.18359 8.8856C3.19741 9.20744 3.46073 9.45931 3.77865 9.44462C4.08966 9.43063 4.33778 9.16406 4.32326 8.84222C4.31635 8.52738 4.06063 8.2825 3.74893 8.2832C3.43101 8.2972 3.1829 8.56376 3.18359 8.8856ZM3.78256 11.9622C3.46464 11.9769 3.20201 11.725 3.18749 11.4032C3.1868 11.0813 3.43561 10.8148 3.75353 10.8008C4.06454 10.8001 4.32095 11.045 4.32786 11.3598C4.34237 11.6816 4.09426 11.9482 3.78256 11.9622Z" fill="#4285F4" />
                                    </svg>
                                    {formatDate(row.createdAt)}
                                </td>
                                <td style={{ gap: '0.1rem' }}>
                                    <svg xmlns="http://www.w3.org/2000/svg" width="19" height="19" viewBox="0 0 19 19" fill="none">
                                        <g clip-path="url(#clip0_2_555)">
                                            <path d="M1.09192 9.74407C1.09192 9.74407 4.03786 3.85219 9.19326 3.85219C14.3487 3.85219 17.2946 9.74407 17.2946 9.74407C17.2946 9.74407 14.3487 15.636 9.19326 15.636C4.03786 15.636 1.09192 9.74407 1.09192 9.74407Z" stroke="#55B76E" stroke-width="1.47297" stroke-linecap="round" stroke-linejoin="round" />
                                            <path d="M9.19334 11.9535C10.4136 11.9535 11.4028 10.9643 11.4028 9.74408C11.4028 8.52383 10.4136 7.53462 9.19334 7.53462C7.97309 7.53462 6.98389 8.52383 6.98389 9.74408C6.98389 10.9643 7.97309 11.9535 9.19334 11.9535Z" stroke="#55B76E" stroke-width="1.47297" stroke-linecap="round" stroke-linejoin="round" />
                                        </g>
                                        <defs>
                                            <clipPath id="clip0_2_555">
                                                <rect width="17.6756" height="17.6756" fill="white" transform="translate(0.355469 0.90625)" />
                                            </clipPath>
                                        </defs>
                                    </svg>
                                    <p style={{ color: '#55B76E', fontSize: '14px', fontWeight: '500' }}>Show Details</p>
                                </td>
                            </tr>
                        ))}
                    </tbody>
                </table>
            </div >


        </div>
    );
}

export default CustomTable;
